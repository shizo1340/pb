:root{
  --bg:#0b0c10;
  --fg:#e8e8e8;
  --muted:#b7bcc8;
  --card:#12141b;
  --border:rgba(255,255,255,.12);
  --brand:#7dd3fc;
  --max:1260px;
  --radius:22px;
  --shadow:0 10px 25px rgba(0,0,0,.35);
  --header-h: 58px;
}

@media (prefers-color-scheme: light){
  :root{
    --bg:#fff;
    --fg:#0b1220;
    --muted:#475569;
    --card:#f8fafc;
    --border:rgba(15,23,42,.12);
    --brand:#0369a1;
    --shadow:0 10px 25px rgba(2,8,23,.08);
  }
}

*{box-sizing:border-box}
/* Avoid global smooth scrolling.
   Some browsers treat repeated scrollIntoView() calls (e.g. TOC highlighting)
   as scroll animations which can cause scroll jank on touch devices.
   Smooth scrolling is handled only for explicit UI actions (Back-to-top / TOC click). */
html{scroll-behavior:auto; overflow-x:hidden; overscroll-behavior-x: none; width:100%}
body{
  margin:0;
  overflow-x:hidden;
  overscroll-behavior-x: none;
  width:100%;
  font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans","Liberation Sans";
  background:var(--bg);
  color:var(--fg);
  line-height:1.65;
}

/* Ensure the HTML 'hidden' attribute always wins.
   Some author styles (e.g. display:flex on cards) can otherwise override UA defaults. */
[hidden]{ display:none !important; }
a{
  color:var(--brand);
  text-decoration: underline;
  text-underline-offset: .18em;
  text-decoration-thickness: .08em;
}
a:hover{
  text-decoration-thickness: .12em;
}
a:focus-visible{
  outline:2px solid currentColor;
  outline-offset:2px;
  border-radius:8px;
}

.container{max-width:var(--max);margin:0 auto;padding:0 18px}
.skip-link{position:absolute;left:-9999px;top:8px;background:var(--card);padding:10px 12px;border:1px solid var(--border);border-radius:12px;z-index:100}
.skip-link:focus{left:16px}

/* Topnav (kompakt + weniger schwarz) */
.site-header{
  position:sticky; top:0; z-index:100;
  backdrop-filter:saturate(140%) blur(10px);
  background: color-mix(in srgb, var(--bg) 82%, transparent);
  border-bottom:0;
  box-shadow: 0 6px 18px rgba(0,0,0,.14);
}

.scroll-progress{
  position:absolute;
  left:0; right:0;
  bottom:0;
  height:3px;
  width:100%;
  border:none;
  padding:0;
  margin:0;
  background: rgba(255,255,255,.06);
  appearance:none;
}
.scroll-progress::-webkit-progress-bar{background: rgba(255,255,255,.06);}
.scroll-progress::-webkit-progress-value{background: color-mix(in srgb, var(--brand) 70%, transparent);}
.scroll-progress::-moz-progress-bar{background: color-mix(in srgb, var(--brand) 70%, transparent);}
.header-row{display:flex;align-items:center;gap:14px;padding:10px 0;min-width:0;flex-wrap:nowrap}
.brand{display:flex;align-items:center;gap:14px;min-width:0;font-weight:750;letter-spacing:.2px;color:var(--fg);text-decoration:none}
.brand:hover{text-decoration:none}
.brand-mark{
  width:28px;
  height:28px;
  display:grid;
  place-items:center;
  border-radius:10px;
  background:transparent; /* transparent as requested */
  border:1px solid color-mix(in srgb, var(--fg) 28%, transparent);
  font-weight:900;
  font-size:.92rem;
  line-height:1;
  letter-spacing:-.02em;
  color:var(--fg);
  flex:0 0 auto;
}
.brand-text{min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.nav{display:flex;gap:10px;flex-wrap:nowrap;align-items:center;min-width:0;flex:1;overflow-x:auto;scrollbar-width:none}
.nav a{color:var(--muted);padding:4px 8px;border-radius:10px;font-size:.95rem;display:inline-flex;align-items:center;line-height:1.2;}
.nav a{text-decoration:none}
.nav a:focus-visible{outline:2px solid var(--brand);outline-offset:2px}
.nav a:hover{background:color-mix(in srgb,var(--card) 70%,transparent);color:var(--fg);text-decoration:none}

.site-header .nav-btn:hover{
  border-color: transparent;
}

/* ===== Nav alignment reset (links + Kapitel button on one line) ===== */
.site-header .nav{
  display:flex;
  min-width:0;
  flex-wrap:nowrap;
  align-items:center;
  gap: 14px;
  margin-left:auto;
}
.site-header .nav a,
.site-header .nav .nav-btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  height: 34px;
  padding: 0 10px;
  border-radius: 10px;
  border: 1px solid transparent;
  background: transparent;
  color: var(--muted);
  font: inherit;
  font-weight: 850;
  line-height: 1;
  letter-spacing: -0.01em;
  text-decoration: none;
  vertical-align: middle;
  -webkit-appearance: none;
  appearance: none;
}
.site-header .nav a:hover,
.site-header .nav .nav-btn:hover{
  color: var(--fg);
  background: rgba(255,255,255,.04);
  border-color: rgba(255,255,255,.06);
}
.site-header .nav a.active,
.site-header .nav .nav-btn.active{
  color: var(--fg);
  background: rgba(255,255,255,.06);
  border-color: rgba(255,255,255,.10);
}
.site-header .nav .nav-btn{ cursor:pointer; }
.site-header .nav .nav-btn .caret{
  margin-left: 6px;
  transform: translateY(0px);
  border-top-color: color-mix(in srgb, var(--muted) 85%, transparent);
}

/* ===== Kapitel: Link + Caret als zusammenh√§ngendes Split-Button ===== */
.site-header .nav .nav-kapitel{
  display:inline-flex;
  align-items:center;
  gap:0;
  border-radius:10px;
  border:1px solid transparent;
  background:transparent;
}
.site-header .nav .nav-kapitel > a,
.site-header .nav .nav-kapitel > .nav-btn{
  border:0;
  border-radius:0;
  background:transparent;
}
.site-header .nav .nav-kapitel > a{
  padding:0 10px;
}
.site-header .nav .nav-kapitel > .nav-btn{
  width:34px;
  padding:0;
  border-left:1px solid rgba(255,255,255,.06);
}
.site-header .nav .nav-kapitel > .nav-btn .caret{ margin-left:0; }

.site-header .nav .nav-kapitel:hover{
  background: rgba(255,255,255,.04);
  border-color: rgba(255,255,255,.06);
}
.site-header .nav .nav-kapitel:hover > a,
.site-header .nav .nav-kapitel:hover > .nav-btn{
  color: var(--fg);
}

.site-header .nav .nav-kapitel.active{
  background: rgba(255,255,255,.06);
  border-color: rgba(255,255,255,.10);
}
.site-header .nav .nav-kapitel.active > a,
.site-header .nav .nav-kapitel.active > .nav-btn{
  color: var(--fg);
}




.nav-toggle{display:none;margin-left:auto;background:transparent;color:var(--fg);border:1px solid var(--border);padding:8px 10px;border-radius:12px}

/* Caret drawn without UTF-8 glyphs (prevents broken caret text) */
.nav .nav-btn .caret{
  width:0;height:0;
  border-left:5px solid transparent;
  border-right:5px solid transparent;
  border-top:6px solid color-mix(in srgb, var(--muted) 85%, transparent);
  opacity:.9;
  transform: translateY(1px);
}
.mega.open .nav-btn .caret{ border-top-color: color-mix(in srgb, var(--fg) 85%, transparent); }



.nav-drawer{border-top:1px solid var(--border);background:var(--bg);padding:14px 0}
.drawer-links{display:flex;flex-wrap:wrap;gap:10px}
.drawer-links a{color:var(--muted);border:1px solid var(--border);border-radius:999px;padding:6px 10px;text-decoration:none;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
  min-width: 0;
  flex: 0 1 auto;}
.drawer-links a:hover{text-decoration:underline}
.drawer-links a:focus-visible{outline:2px solid var(--brand);outline-offset:2px}
.drawer-search{margin-top:12px}
#site-search{width:100%;padding:10px 12px;border-radius:12px;border:1px solid var(--border);background:var(--card);color:var(--fg)}
#site-search::placeholder{color:var(--muted);opacity:1}

.search-results{margin-top:8px}
.search-results a{display:block;padding:8px 10px;border:1px solid var(--border);border-radius:12px;margin-top:6px;color:var(--fg);background:var(--card);text-decoration:none}
.search-results a:hover{text-decoration:underline}
.search-results a:focus-visible{outline:2px solid var(--brand);outline-offset:2px}

/* ===== HERO (keine L√ºcken, Hintergrund nur im Container) ===== */
.hero-band{
  background:transparent;
  padding:0 0 18px;
}
.hero-inner{
  max-width:var(--max);
  margin:0 auto;
  padding:10px 18px 0;   /* Breadcrumb direkt unter Topnav */
  border-radius: 0 0 calc(var(--radius) + 6px) calc(var(--radius) + 6px);
  overflow:hidden;       /* <-- verhindert die ‚Äúwinzige L√ºcke‚Äù */
  background:
    radial-gradient(1200px 600px at 20% -20%, color-mix(in srgb, var(--brand) 22%, transparent), transparent 55%),
    radial-gradient(900px 500px at 85% 0%, rgba(167,139,250,.14), transparent 55%),
    linear-gradient(180deg, rgba(7,10,15,.10), rgba(7,10,15,.70));
}

/* Breadcrumb */
.crumbs{font-size:14px;color:var(--muted);margin:0 0 8px}
.crumbs a{color:var(--muted);text-decoration:none}
.crumbs a:hover{color:var(--fg);text-decoration:underline}
.crumbs a:focus-visible{outline:2px solid var(--brand);outline-offset:2px}
.crumbs a:hover{color:var(--fg);text-decoration:none}

/* Hero-Card (endet sauber, keine ‚ÄúTail‚Äù-Fl√§che) */
.hero-card{
  background: color-mix(in srgb, var(--card) 92%, transparent);
  border:1px solid var(--border);
  border-radius: calc(var(--radius) + 4px);
  box-shadow: var(--shadow);
  padding: 18px 20px;
  width: 100%;
}

/* Neutralisiere Base-Card am article-header (verhindert Doppel-Container) */
.article, .article-header{
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
}
.article-header{padding:0 !important; margin:0 !important}

.article-header h1{
  margin:0 0 10px;
  font-size: clamp(2.0rem, 3.2vw, 3.2rem);
  line-height:1.06;
}
.article-sub{margin:0 0 12px;color:color-mix(in srgb, var(--fg) 80%, transparent);max-width:78ch}
.article-meta{color:var(--muted);font-size:14px;display:flex;gap:10px;align-items:center}

/* ===== MAIN LAYOUT ===== */
.container.content{max-width:var(--max);padding-left:18px;padding-right:18px}
.content{padding:0 0 40px}

.layout{
  max-width:var(--max);
  margin: 18px auto 0;
  padding: 0 18px;
  display:grid;
  grid-template-columns: 320px minmax(0, 1fr);
  gap: 22px;
  align-items:start;
}

/* Sidebar TOC */
.toc{
  position: sticky;
  top: 76px;
  max-height: calc(100vh - 96px);
  overflow:auto;
  padding-right: 10px;
}
.toc::-webkit-scrollbar{width:6px}
.toc::-webkit-scrollbar-thumb{background: rgba(255,255,255,.22);border-radius:6px}

.toc .toc-box{
  background: color-mix(in srgb, var(--card) 75%, transparent);
  border:1px solid var(--border);
  border-radius: calc(var(--radius) + 2px) !important; /* <-- erzwingt rund */
  overflow:hidden !important;                           /* <-- clippt sauber */
  box-shadow: var(--shadow);
  padding: 14px 14px;
}
.toc-title{font-weight:650;margin-bottom:8px;color:var(--muted)}

#toc ul{margin:0;padding-left:18px}
#toc li{margin:8px 0}
#toc a{display:inline-block;color:var(--muted);line-height:1.35;padding:3px 2px;border-radius:10px;text-decoration:none}
#toc a:hover{color:var(--fg);text-decoration:none}

/* Article body */
.article-body{
  background: color-mix(in srgb, var(--card) 80%, transparent);
  border:1px solid var(--border);
  border-radius: calc(var(--radius) + 4px);
  box-shadow: var(--shadow);
  padding: 22px 22px;
  min-width:0;
  overflow: visible;
}
.article-body h2{margin-top:26px;font-size:22px;scroll-margin-top:90px}
.article-body h3{margin-top:18px;font-size:18px;scroll-margin-top:90px}
.article-body ul{padding-left:18px}
.article-body code{
  background:color-mix(in srgb,var(--bg) 75%,transparent);
  padding:.12em .35em;
  border-radius:8px;
  border:1px solid var(--border);
  word-break: break-word;
}

/* Footer */
.footer{padding:18px 20px 20px;border-top:1px solid var(--border);color:var(--muted)}
.footer-links{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:8px}
.footer-links a{color:var(--muted)}

.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

@media (max-width: 900px){
  /* Mobile scroll performance: backdrop-filter can be expensive on some devices.
     Use a solid-ish background instead to keep scrolling smooth. */
  .site-header{ backdrop-filter:none; background: color-mix(in srgb, var(--bg) 92%, transparent); }
  .layout{grid-template-columns:1fr}
  /* TOC is a <details> now; keep it as an in-content accordion on small screens */
  .toc{
    position: static;
    top: auto;
    max-height: none;
    overflow: visible;
    padding-right: 0;
    margin: 10px 0 18px;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    background: color-mix(in srgb, var(--card) 92%, transparent);
    padding: 8px 12px;
  }
  .nav{display:none}
  .nav-toggle{display:inline-flex}
  /* Mobil: Suche ist im Men√º (Drawer) vorhanden */
  .top-search{display:none}
  /* Mobil: etwas mehr Luft im Kopfbereich */
  .header-row{gap:14px}
  .hero-inner{padding:10px 16px 0}
  .layout{padding:0 16px}
}


.footer-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  max-width:var(--max);
  margin:0 auto;
}
.footer-note{
  margin-left:auto;
  text-align:right;
}

/* Affiliate disclosure (subtle) */
.footer-disclosure{
  margin-top: 8px;
  font-size: .9rem;
  color: var(--muted);
}
.footer-disclosure a{ color: var(--muted); }
.footer-disclosure a:hover{ color: var(--fg); text-decoration: none; }

.affiliate-disclosure{
  font-size: .95rem;
}

/* Header search (desktop + mobile) */
.site-search{position:relative;margin-left:12px;display:flex;align-items:center}
.site-search input{
  width: clamp(140px, 18vw, 220px);
  padding: 6px 10px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--card);
  color: var(--fg);
  font-size: .95rem;
}
.site-search input:focus{outline:none;border-color:color-mix(in srgb,var(--brand) 75%, white 0%)}
.site-search .site-search .search-results .muted{
  padding:10px 12px;
  color: var(--muted);
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 14px;
}
.site-search .search-results a{
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 14px;
  margin-top: 8px;
}
.site-search .search-results a:first-child{margin-top:0}
.search-hit .hit-title{font-weight:650}
.search-hit .hit-snippet{color:var(--muted);font-size:.95rem;margin-top:2px}

@media(max-width:900px){.site-search{margin-left:auto}.site-search input{width: min(55vw, 220px)}}

/* Search (ideal): results directly under the field (no overlay), full width of the search box */
.site-search{
  position:relative;
  margin-left:12px;
  display:flex;
  flex-direction:column;
  align-items:stretch;
  min-width: 260px;
}

.site-search input{
  width: 100%;
  padding: 8px 10px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--card) 92%, transparent);
  color: var(--fg);
  font-size: .95rem;
}

/* Dedicated filter/search pages (e.g. /anbieter/, /suche/)
   These pages reuse the search UI but outside the header "dropdown" pattern. */
.site-search-page{
  color-scheme: light dark;
}

.site-search-page > input[type="search"],
.site-search-page input[type="search"]{
  width: 100%;
  max-width: 520px;
  padding: 8px 10px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--card) 92%, transparent);
  color: var(--fg);
  font-size: .95rem;
}

.site-search-page select{
  padding: 8px 10px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--card) 92%, transparent);
  color: var(--fg);
  font-size: .95rem;
}

.site-search-page :is(input[type="search"], select):focus-visible{
  outline: 2px solid var(--brand);
  outline-offset: 2px;
}

.site-search-page .filter-row{
  display:flex;
  gap: .5rem;
  flex-wrap: wrap;
  align-items: flex-end;
  margin-top: .6rem;
}

.site-search-page .filter-row select{ min-width: 180px; }

.site-search-page .filter-check{
  display:flex;
  align-items:center;
  gap:.45rem;
  padding: 7px 10px;
  border: 1px solid var(--border);
  border-radius: 12px;
  background: color-mix(in srgb, var(--card) 92%, transparent);
  color: var(--muted);
  font-size: .95rem;
  user-select:none;
}

.site-search-page .filter-check input[type="checkbox"]{
  width: 16px;
  height: 16px;
}

.search-results{
  display:none;
  margin-top: 8px;
  width: 100%;
  max-height: none;   /* no inner scroll */
  overflow: visible;
  border: 1px solid var(--border);
  border-radius: 14px;
  background: color-mix(in srgb, var(--card) 92%, transparent);
  box-shadow: var(--shadow);
}

/* Search pages (e.g. /anbieter/, /suche/): results are part of the page, not a dropdown.
   The generic .search-results is hidden by default (used for header search dropdowns).
   On dedicated pages we want the results block to be visible. */
.site-search-page .search-results,
.site-search-page .search-page-results{
  display:block;
}

/* On search pages, render results as a normal list (not as card-like dropdown items). */
.site-search-page .search-results ul{
  margin: 0;
  padding-left: 1.2rem;
}
.site-search-page .search-results li{ margin: .35rem 0; }
.site-search-page .search-results a{
  display: inline;
  padding: 0;
  border: 0;
  border-radius: 0;
  margin-top: 0;
  background: transparent;
  text-decoration: underline;
}

.search-hit{
  display:block;
  padding: 10px 12px;
  border-bottom: 1px solid color-mix(in srgb, var(--border) 75%, transparent);
  color: var(--fg);
  text-decoration:none;
}
.search-hit:last-child{ border-bottom:0; }
.search-hit:hover{
  background: color-mix(in srgb, var(--bg) 85%, transparent);
  text-decoration:none;
}
.hit-title{ font-weight: 700; }
.hit-snippet{ color: var(--muted); font-size: .95rem; margin-top: 4px; }

@media (max-width: 900px){
  .site-search{ min-width: 0; width: 100%; margin-left: 0; }
  .header-row{ align-items: flex-start; }
}


/* Cards & grids (Homepage Einstieg, Kriterien statt Hype) */
.grid{
  display:grid;
  grid-template-columns:repeat(3,minmax(0,1fr));
  gap:14px;
  margin:14px 0 6px;
}
@media (max-width: 960px){ .grid{grid-template-columns:repeat(2,minmax(0,1fr));} }
@media (max-width: 620px){ .grid{grid-template-columns:1fr;} }

.card{
  background:color-mix(in srgb,var(--bg) 75%,transparent);
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:14px 14px 12px;
}
.card h3{margin:0 0 6px;font-size:1.05rem;letter-spacing:-.1px}
.card p{margin:0;color:var(--muted);max-width:60ch}

a.card{display:block;color:var(--fg);text-decoration:none}
a.card:hover{background:color-mix(in srgb,var(--card) 70%,transparent)}
a.card:focus-visible{outline:2px solid color-mix(in srgb,var(--brand) 70%,transparent);outline-offset:2px}
a.card h3 a{color:inherit;text-decoration:none}


/* Topnav: cluster dropdown (desktop) */
.nav.nav-dropdown{gap:10px;align-items:center}
.nav .nav-item{position:relative}
.nav .nav-btn{
  background:transparent;
  color:var(--muted);
  border:1px solid transparent;
  padding:8px 10px;
  border-radius:12px;
  cursor:pointer;
  font:inherit;
}
.nav .nav-btn:hover,
.nav .nav-btn[aria-expanded="true"]{
  background:color-mix(in srgb,var(--card) 70%,transparent);
  color:var(--fg);
  border-color:var(--border);
}
.nav .nav-link{
  color:var(--muted);
  padding:8px 10px;
  border-radius:12px;
}
.nav .nav-link:hover{
  background:color-mix(in srgb,var(--card) 70%,transparent);
  color:var(--fg);
  text-decoration:none;
}
.nav .nav-dd{
  position:absolute;
  top:calc(100% + 10px);
  right:0;
  min-width:240px;
  background:color-mix(in srgb,var(--bg) 70%,transparent);
  border:1px solid var(--border);
  border-radius:14px;
  padding:10px;
  box-shadow:var(--shadow);
  display:none;
  z-index:60;
}
.nav .nav-dd a{
  display:block;
  padding:8px 10px;
  border-radius:12px;
  color:var(--fg);
}
.nav .nav-dd a:hover{background:color-mix(in srgb,var(--card) 70%,transparent);text-decoration:none}
.nav .nav-item.open .nav-dd{display:block}

/* Mobile drawer groups */
.drawer-links{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
@media (max-width: 560px){ .drawer-links{grid-template-columns:1fr} }
.drawer-group{
  border:1px solid var(--border);
  border-radius:14px;
  padding:10px;
  background:color-mix(in srgb,var(--bg) 70%,transparent);
}
.drawer-title{font-weight:650;margin:2px 0 8px;color:var(--fg)}
.drawer-group a{display:block;padding:6px 8px;border-radius:10px;color:var(--muted)}
.drawer-group a:hover{background:color-mix(in srgb,var(--card) 70%,transparent);color:var(--fg);text-decoration:none}

/* Search filter chips */
.search-filters{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin:10px 0 0;
}
.chip{
  border:1px solid var(--border);
  background:color-mix(in srgb,var(--bg) 78%,transparent);
  color:var(--muted);
  padding:6px 10px;
  border-radius:999px;
  cursor:pointer;
  font:inherit;
  line-height:1.1;
}
.chip:hover{color:var(--fg);background:color-mix(in srgb,var(--card) 70%,transparent)}
.chip.active{
  color:var(--fg);
  border-color:color-mix(in srgb,var(--brand) 55%, var(--border));
  background:color-mix(in srgb,var(--brand) 10%, transparent);
}


/* Design polish pack */
:root{
  --h1: clamp(2.1rem, 3.2vw, 2.7rem);
  --h2: clamp(1.35rem, 1.7vw, 1.65rem);
  --h3: clamp(1.05rem, 1.2vw, 1.18rem);
  --ring: 2px solid color-mix(in srgb,var(--brand) 70%,transparent);
}

@media (prefers-color-scheme: dark){
  body{
    background:
      radial-gradient(900px 500px at 10% 0%, color-mix(in srgb,var(--brand) 10%, transparent), transparent 60%),
      radial-gradient(900px 500px at 100% 10%, color-mix(in srgb,var(--brand) 7%, transparent), transparent 65%),
      var(--bg);
  }
}

/* Headings */
.article-header h1{font-size:var(--h1)}
.article-body h2{font-size:var(--h2)}
.article-body h3{font-size:var(--h3)}

/* Content breathing room */
.article-body{padding:20px 20px 26px}
.article-body p, .article-body li{max-width:72ch}

/* Anbieter: Intro-Text soll nicht auf 72ch begrenzt sein (sonst wirken Umbr√ºche "unn√∂tig").
   Nur f√ºr die Anbieter-Seite, damit der Rest des Handbuchs weiterhin eine angenehme Lesespalte beh√§lt. */
.anbieter-intro p,
.anbieter-intro li{
  max-width: none;
}
.article-body > * + h2{margin-top:30px}
.article-body h3{margin-top:18px;margin-bottom:8px}
.article-body p{margin-top:10px;margin-bottom:10px}

/* Focus ring consistency */
a:focus-visible, button:focus-visible, input:focus-visible{
  outline: var(--ring);
  outline-offset: 2px;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  *{scroll-behavior:auto !important}
  .card, .nav-btn, .chip, #toc a{transition:none !important}
}

/* Cards: hover polish */
a.card{transition:transform .12s ease, box-shadow .12s ease, background .12s ease}
a.card:hover{transform:translateY(-1px); box-shadow:0 14px 30px rgba(0,0,0,.28)}
.card .card-row{display:flex;align-items:flex-start;gap:10px}
.card .card-ico{
  width:26px;height:26px;flex:0 0 26px;
  border-radius:10px;
  border:1px solid var(--border);
  background:color-mix(in srgb,var(--bg) 78%,transparent);
  display:grid;place-items:center;
  color:var(--brand);
}
.card .card-ico svg{width:16px;height:16px;display:block}

/* TOC: same language as cards + active item */
.toc-box{
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  background:color-mix(in srgb,var(--bg) 72%,transparent);
}
#toc a.active{
  color:var(--fg);
  background:color-mix(in srgb,var(--brand) 10%, transparent);
  border:1px solid color-mix(in srgb,var(--brand) 40%, var(--border));
}
#toc a{border:1px solid transparent}

/* Search: sticky toolbar + panel results */
.site-search{
  /* Not sticky: keep the search box in the normal document flow */
  position:relative;
  top:auto;
  z-index:25;
  padding:12px;
  border:1px solid var(--border);
  border-radius:var(--radius);
  background:color-mix(in srgb,var(--bg) 72%,transparent);
  box-shadow:var(--shadow);
  margin:0 0 16px;
}
.site-search{backdrop-filter:saturate(140%) blur(8px)}
.site-search{display:block}
.site-search .search-results{
  margin-top:10px;
  max-height:320px;
  overflow:auto;
  border-radius:14px;
}
.site-search .search-results a{margin-top:8px}

/* Chips: clearer active */
.chip{transition:background .12s ease, color .12s ease, border-color .12s ease}
.chip.active{box-shadow:0 8px 18px rgba(0,0,0,.18)}

/* Dropdown: indicator + alignment */
.nav .nav-dd{
  left:50%;
  right:auto;
  transform:translateX(-50%);
  max-width:min(360px, 92vw);
}

/* Active nav button */
.nav .nav-btn.is-current{
  color:var(--fg);
  background:color-mix(in srgb,var(--brand) 10%, transparent);
  border-color:color-mix(in srgb,var(--brand) 35%, var(--border));
}

/* Startseite: Grid-Items nicht strecken (verhindert ‚Äûleere‚Äú gro√üe Karten) */
.grid{align-items:start}
.grid .card{align-self:start}

/* TOC: kein Corner/keine Marker */
.toc{overflow-y:auto; overflow-x:hidden;}
#toc ul, #toc ol{list-style:none; padding:0; margin:0;}
#toc li{list-style:none;}

/* --- Home Einstieg Grid (fix) --- */
.home-grid{
  display:grid;
  grid-template-columns: repeat(3, minmax(0,1fr));
  gap:16px;
  margin-top:14px;
}
@media (max-width: 900px){
  .home-grid{ grid-template-columns: 1fr; }
}
.home-card{
  display:flex;
  gap:14px;
  padding:16px;
  border:1px solid var(--border);
  border-radius:var(--radius);
  background:color-mix(in srgb, var(--card) 92%, transparent);
  box-shadow:var(--shadow);
  color:var(--fg);
  text-decoration:none;
}
.home-card:hover{
  text-decoration:none;
  border-color: color-mix(in srgb, var(--brand) 45%, var(--border));
  transform: translateY(-1px);
}
.home-ico{
  width:34px;height:34px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border-radius:12px;
  border:1px solid var(--border);
  background: color-mix(in srgb, var(--bg) 88%, transparent);
  color: var(--brand);
  flex:0 0 34px;
}
.home-ico svg{ width:18px;height:18px; }
.home-body h3{ margin:0 0 6px; font-size:1.1rem; }
.home-body p{ margin:0; color:var(--muted); max-width:60ch; }


/* === UX PATCH (Usability + Accessibility) === */
:root{
  --focus: color-mix(in srgb, var(--brand) 65%, white);
}


/* Tables: readable, bordered, scrollable (left sidebar stays independent) */
.table-wrap{
  margin: 14px 0;
  border: 1px solid var(--border);
  border-radius: calc(var(--radius) - 2px);
  background: color-mix(in oklab, var(--card), transparent 10%);
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}

.article-body table{
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  min-width: 560px; /* keeps columns readable; wrapper enables horizontal scroll */
  border: 1px solid var(--border);
  border-radius: calc(var(--radius) - 2px);
  background: color-mix(in oklab, var(--card), transparent 8%);
}

.table-wrap > table{
  border: 0;
  border-radius: 0;
  background: transparent;
}

.article-body caption{
  caption-side: top;
  text-align: left;
  padding: 10px 12px;
  color: var(--muted);
  font-size: .95rem;
}

.article-body th,
.article-body td{
  padding: 10px 12px;
  vertical-align: top;
  line-height: 1.45;
}

/* Pfad switcher: small note so users understand it opens extra sections */
.pfad-note{
  color: var(--muted);
  font-size: .9em;
  white-space: nowrap;
}

/* Startpunkt line: keep it readable but less repetitive */
.article-body p.startpunkt{
  margin: 12px 0 14px;
  padding: 8px 10px;
  border-left: 3px solid var(--border);
  border-radius: 8px;
  background: color-mix(in oklab, var(--card), transparent 18%);
  color: var(--muted);
  font-size: .96rem;
}

/* Jump links for fast scanning */
.quickjump{
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin: 12px 0 18px;
}
.quickjump a{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  border: 1px solid var(--border);
  border-radius: 999px;
  background: color-mix(in oklab, var(--card), transparent 12%);
  text-decoration: none;
  font-size: .95rem;
  color: var(--text);
}
.quickjump a:hover{
  background: color-mix(in oklab, var(--card), transparent 2%);
}

/* Scanability: visually mark common "attention" headings */
.article-body .heading-mistakes::before{ content: "‚ö†Ô∏è "; }
.article-body .heading-redflags::before{ content: "üö© "; }

.article-body thead th{
  position: sticky;
  top: 0;
  z-index: 1;
  background: color-mix(in oklab, var(--bg), var(--card) 55%);
  color: var(--fg);
  font-weight: 700;
  border-bottom: 1px solid var(--border);
  white-space: nowrap;
}

.article-body tbody td{
  border-top: 1px solid color-mix(in oklab, var(--border), transparent 15%);
  color: var(--fg);
}

.article-body th + th,
.article-body td + td{
  border-left: 1px solid color-mix(in oklab, var(--border), transparent 35%);
}

.article-body tbody tr:nth-child(even) td{
  background: color-mix(in oklab, var(--bg), transparent 92%);
}

.article-body tbody tr:hover td{
  background: color-mix(in oklab, var(--bg), transparent 88%);
}

@media (max-width: 720px){
  .article-body table{ min-width: 520px; }
  .article-body th, .article-body td{ padding: 10px 10px; }
}

/* Better focus visibility (keyboard) */
:focus{ outline: none; }
:focus-visible{
  outline: 3px solid var(--focus);
  outline-offset: 3px;
}

/* Improve touch targets */
button, .nav a, .nav-btn, .chip, .search-hit, .home-card, .card{
  -webkit-tap-highlight-color: transparent;
}

/* Smooth interactions (respect reduced motion below) */
a, button, input, .home-card, .card, .nav-btn{
  transition: border-color .15s ease, background-color .15s ease, color .15s ease, transform .15s ease, box-shadow .15s ease;
}

/* Limit line-length for readability */
.article-body p, .article-body li, .article-body blockquote{
  max-width: 78ch;
}

/* Anbieter: Intro & Callout sollen die volle Containerbreite nutzen.
   (Sonst wirkt der Umbruch "unn√∂tig", obwohl rechts noch Platz ist.) */
.article-body .anbieter-intro p,
.article-body .anbieter-intro li{
  max-width: none !important;
}

/* Better section spacing */
.article-body h2{ scroll-margin-top: 96px; }
.article-body h3{ scroll-margin-top: 96px; }
.article-body h2 + p{ margin-top: 8px; }
.article-body p{ margin: 12px 0; }

/* Search UI */
.search{
  display:block;
  margin: 0 0 18px;
}
.search form{
  display:block;
}
#site-search{
  font-size: 16px; /* prevent iOS zoom */
}
#search-results{
  margin-top: 10px;
  display:none;
  border: 1px solid var(--border);
  border-radius: calc(var(--radius) - 6px);
  background: color-mix(in srgb, var(--card) 94%, transparent);
  overflow:hidden;
}
.search-hit{
  display:block;
  padding: 12px 14px;
  border-top: 1px solid var(--border);
  text-decoration:none;
  color: var(--fg);
}
.search-hit:first-child{ border-top:0; }
.search-hit:hover{
  background: color-mix(in srgb, var(--brand) 10%, transparent);
  text-decoration:none;
}
.search-hit:focus-visible{
  outline: 3px solid var(--focus);
  outline-offset: -3px;
}
.hit-title{ font-weight: 650; margin-bottom: 4px; }
.hit-snippet{ color: var(--muted); font-size: .95rem; line-height: 1.45; }

/* Filter chips */
.search-filters{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  margin-top:10px;
}
.chip{
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: 6px 10px;
  background: transparent;
  color: var(--muted);
  cursor:pointer;
  font-size: .95rem;
}
.chip.active{
  color: var(--fg);
  border-color: color-mix(in srgb, var(--brand) 45%, var(--border));
  background: color-mix(in srgb, var(--brand) 10%, transparent);
}
.chip:hover{
  color: var(--fg);
  background: color-mix(in srgb, var(--card) 85%, transparent);
}

/* TOC scrollbar only (left) */
.toc{
  scrollbar-width: thin;
  scrollbar-color: color-mix(in srgb, var(--brand) 30%, var(--muted)) transparent;
}
.toc::-webkit-scrollbar{ width: 10px; }
.toc::-webkit-scrollbar-thumb{
  background: color-mix(in srgb, var(--brand) 25%, transparent);
  border-radius: 999px;
  border: 2px solid transparent;
  background-clip: padding-box;
}
.toc::-webkit-scrollbar-track{ background: transparent; }


/* TOC <details> summary */
.toc summary{
  display:none; /* desktop: sidebar only */
}
.toc summary::-webkit-details-marker{ display:none; }

/* TOC v2 (non-/anbieter): show the summary as the single visible label on desktop */
.toc.toc-v2 summary{
  display:block;
  list-style:none;
  cursor:pointer;
  font-weight:650;
  color:var(--muted);
  margin-bottom:8px;
}
.toc.toc-v2 summary:hover{ color:var(--fg); }

/* Mobile TOC behaviour: summary + in-content list */
@media (max-width: 900px){
  .toc summary{
    display:block;
    list-style:none;
    cursor:pointer;
    font-weight:650;
    color:var(--fg);
  }
  .toc .toc-title{ display:none; } /* summary already provides the label */
  .toc .toc-box{
    background: transparent;
    border: 0;
    box-shadow: none;
    padding: 8px 0 0;
  }
  .toc nav ul{ list-style:none; padding:0; margin: 0; }
  .toc nav li{ margin: 0; }
  .toc nav a{
    display:block;
    padding: 8px 6px;
    border-radius: 10px;
    color: var(--muted);
    text-decoration:none;
  }
  .toc nav a:hover{
    background: color-mix(in srgb, var(--brand) 10%, transparent);
    color: var(--fg);
  }
  .toc nav a.active{
    background: color-mix(in srgb, var(--brand) 12%, transparent);
    border: 1px solid color-mix(in srgb, var(--brand) 35%, var(--border));
  }
}

/* Reading progress bar */
.reading-progress{
  position:absolute;
  left:0; right:0; bottom:-1px;
  height: 2px;
  background: transparent;
}
.reading-progress > span{
  display:block;
  height: 2px;
  width:0%;
  background: color-mix(in srgb, var(--brand) 75%, white);
}

/* Back to top button */
:root{ --pb-safe-bottom: max(env(safe-area-inset-bottom), 0px); }
.backtotop{
  position: fixed;
  right: 18px;
  bottom: calc(18px + var(--pb-safe-bottom));
  z-index: 60;
  opacity: 0;
  visibility: hidden;
  pointer-events:none;
  transform: translateY(6px);
}
.backtotop button{
  border:1px solid var(--border);
  border-radius: 999px;
  padding: 10px 12px;
  background: color-mix(in srgb, var(--card) 92%, transparent);
  color: var(--fg);
  box-shadow: var(--shadow);
}
.backtotop button:hover{
  border-color: color-mix(in srgb, var(--brand) 45%, var(--border));
}
.backtotop.show{
  opacity: 1;
  visibility: visible;
  pointer-events:auto;
  transform: translateY(0);
}

/* Prefer-reduced-motion */
@media (prefers-reduced-motion: reduce){
  html{ scroll-behavior:auto; }
  *{ transition:none !important; animation:none !important; }
}


/* =========================================================
   Search results: overlay dropdown (doesn't push content)
   ========================================================= */

/* Anchor the results panel to the search box */
.site-search{ position:relative; }

/* Make the results float over the page (instead of increasing layout height) */
.site-search #search-results{
  position:absolute;
  left:0;
  right:0;
  top: calc(100% + 8px);
  margin-top: 0 !important;
  max-height: min(60vh, 520px);
  overflow: auto !important;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
  z-index: 200;
}

/* Slightly stronger elevation when floating */
.site-search #search-results{
  box-shadow: 0 14px 36px rgba(0,0,0,.22);
}

/* Single-column layout for legal pages */
.layout.layout-single{grid-template-columns:1fr!important}


/* Utility blocks used across articles */
.list{padding-left:18px;margin:10px 0}
.list li{margin:6px 0}
.callout{border:1px solid var(--border);border-radius:var(--radius);padding:12px 14px;margin:14px 0;background:color-mix(in srgb,var(--bg) 85%, transparent)}
.callout.subtle{background:color-mix(in srgb,var(--bg) 92%, transparent)}
.matrix-note{color:var(--muted);font-size:.98rem}



/* Card title (used to avoid TOC picking up headings inside cards) */
.card-title{margin:0 0 6px;font-size:1.05rem;font-weight:700;letter-spacing:-.1px}


/* Fix code block overflow */
.article-body pre {
  max-width: 100%;
  overflow-x: auto;
  white-space: pre;
}


/* --- Content improvements (v4) --- */
.article-body img{max-width:100%;height:auto;display:block}
.pb-diagram-figure{margin:10px 0 0 0}
.pb-diagram-figure img{max-width:100%;height:auto;border-radius:14px;border:1px solid var(--border);background:var(--bg)}
.pb-diagram .muted{margin-top:6px}
.pb-glossary ul.list{margin-top:8px}
/* pb-editorial (collapsible inside quickstart) */
details.callout.pb-editorial > summary{
  list-style: none;
  cursor: pointer;
  font-weight: 650;
}
details.callout.pb-editorial > summary::-webkit-details-marker{ display:none; }
details.callout.pb-editorial[open] > summary{ margin-bottom: 8px; }
details.callout.pb-editorial .pb-editorial-body > :first-child{ margin-top: 0; }



/* ===== Astro glue: header search (top-right) ===== */
.top-search{
  position:relative;
  margin-left: 10px;
  min-width: 220px;
  flex: 1 1 360px;
  max-width: 460px;
}
@media (max-width: 1100px){
  .top-search{ flex-basis: 300px; max-width: 380px; }
}
@media (max-width: 900px){
  .top-search{ flex: 1 1 320px; max-width: none; min-width: 200px; margin-left: auto; }
}
@media (max-width: 720px){
  /* Keep search visible on mobile: wrap the header and place the search on its own row */
  .header-row{ flex-wrap: wrap; }
  .top-search{
    display:block;
    flex: 1 1 100%;
    max-width: none;
    min-width: 0;
    margin-left: 0;
    margin-top: 8px;
    order: 3;
  }
  .mobileBtn{ order: 2; margin-left: auto; }
}

.top-search input[type="search"]{
  width:100%;
  padding: 10px 12px;
  border-radius: 12px;
  border:1px solid var(--border);
  /* Slightly stronger contrast so the search reads as an input (esp. on the start page hero). */
  background: color-mix(in srgb, var(--card) 80%, transparent);
  color: var(--fg);
  outline: none;
}
.top-search input[type="search"]::placeholder{ color: color-mix(in srgb, var(--muted) 80%, transparent); }

.top-search .search-results{
  position:absolute;
  top: calc(100% + 8px);
  right: 0;
  left: 0;
  z-index: 80;

  /* Make results scrollable so long lists don't get cut off */
  max-height: min(70vh, 520px);
  overflow-y: auto;
  overflow-x: hidden;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
}
.top-search .search-results.open{ display:block; }
.top-search .search-results{ display:none; }

.top-search .search-results a{
  background: color-mix(in srgb, var(--bg) 65%, transparent);
}

/* ===== Mega (Kapitel) dropdown panel ===== */
.mega{
  /* Fixed + scrollable: long menus must not be cut off */
  position:fixed;
  inset:0;
  padding-top: var(--header-h); /* keeps content below the sticky header */
  display:none;
  z-index: 90;
  overflow-x:hidden;
  overflow-y:auto;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
}
.mega.open{ display:block; }

.mega-scrim{display:none;}
.mega.open .mega-scrim{
  display:block;
  position:fixed;
  inset:0;
  background: rgba(0,0,0,.94);
  backdrop-filter: none;
}
.mega-inner{position:relative; z-index:1;}


.mega-inner{
  /* Slightly wider than the default content container to reduce wrapping in the mega menu */
  max-width: min(1400px, 96vw);
  margin: 0 auto;
  padding: 14px 18px 18px;
}
.mega-grid{
  background: var(--card);
  backdrop-filter: none;
  border:1px solid var(--border);
  border-radius: calc(var(--radius) + 6px);
  box-shadow: var(--shadow);
  padding: 16px 16px;
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 18px;
}


/* ===== Mega-Men√º: Themen (Gruppen + Icons + Spalten) ===== */
.mega-grid-3{
  grid-template-columns: minmax(240px, 310px) 1fr;
}
.mega-columns{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 14px;
  align-content: start;
}
.mega-col-title{
  display:flex;
  align-items:center;
  gap: 8px;
  font-weight: 650;
  margin: 0 0 10px;
  color: var(--fg);
}
.mega-icon, .mega-item-icon{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width: 18px;
  height: 18px;
  flex: 0 0 auto;
  opacity: .9;
}
.mega-icon svg, .mega-item-icon svg{
  width: 18px;
  height: 18px;
}
.mega-links{
  display:flex;
  flex-direction:column;
  gap: 10px;
}
.mega-link{
  display:flex;
  align-items:center;
  gap: 10px;
  padding: 8px 10px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--card) 55%, transparent);
  text-decoration:none;
}
.mega-link:hover{
  background: color-mix(in srgb, var(--card) 80%, transparent);
  text-decoration:none;
}
.mega-link.active{
  border-color: color-mix(in srgb, var(--brand) 55%, var(--border));
  box-shadow: 0 0 0 1px color-mix(in srgb, var(--brand) 25%, transparent) inset;
}
.mega-link-label{
  min-width: 0;
  overflow:hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.mega-footer{
  margin-top: 12px;
  display:flex;
  justify-content:flex-end;
}
.mega-all{
  color: var(--muted);
  text-decoration:none;
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: 8px 12px;
  background: color-mix(in srgb, var(--card) 45%, transparent);
}
.mega-all:hover{ text-decoration:underline; }

@media (max-width: 980px){
  .mega-grid-3{ grid-template-columns: 1fr; }
  .mega-columns{ grid-template-columns: 1fr; }
  .mega-footer{ justify-content:flex-start; }
}
.mega-col h3{
  margin: 0 0 10px;
  font-size: .95rem;
  color: var(--fg);
  letter-spacing: .2px;
}
.mega-col a.mega-link{
  display:block;
  padding: 8px 10px;
  border-radius: 12px;
  color: var(--muted);
  text-decoration:none;
  border: 1px solid transparent;

  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;}
.mega-col a.mega-link:hover{
  background: color-mix(in srgb, var(--card) 70%, transparent);
  color: var(--fg);
  border-color: var(--border);
}

/* Unterlinks im Themen-Megamen√º */
.mega-sub{
  list-style:none;
  margin: 8px 0 0;
  padding: 0 0 0 34px;
  display: grid;
  gap: 6px;
}
.mega-sub-link{
  display:block;
  padding: 6px 8px;
  border-radius: 10px;
  color: var(--muted);
  text-decoration: underline;
  text-underline-offset: 3px;
  font-weight: 650;
}
.mega-sub-link:hover{
  color: var(--fg);
  background: color-mix(in srgb, var(--card) 70%, transparent);
  text-decoration: none;
}
.mega-item[open] .mega-sub{
  /* Keine inneren Scrollboxen ‚Äì die ganze Liste soll sichtbar sein.
     Wenn es zu lang wird, scrollt das Mega-Men√º als Ganzes. */
  max-height: none;
  overflow: visible;
}

/* ===== Footer row like live ===== */
.site-footer{
  margin-top: 40px;
  padding: 18px 0 26px;
  border-top: 1px solid color-mix(in srgb, var(--border) 70%, transparent);
}
.footer-row{
  display:flex;
  align-items:center;
  justify-content:center;
  flex-wrap: wrap;
  gap: 12px;
  padding: 0 18px;
}
.footer-row a{ color: var(--muted); text-decoration:none; }
.footer-row a:hover{ color: var(--fg); text-decoration:underline; }

.footer-copy{ color: var(--muted); opacity: 0.9; }

.footer-promise{
  margin-top: 24px;
  padding: 12px 18px 0 18px;
  display:flex;
  flex-direction: column;
  align-items:center;
  justify-content:center;
  gap: 10px;
  text-align: center;
}
.promise-badge{
  font-size: 12px;
  letter-spacing: 0.02em;
  text-transform: uppercase;
  font-weight: 900;
  color: var(--muted);
  border: 1px solid var(--border);
  padding: 4px 8px;
  border-radius: 999px;
}
.promise-list li{
  padding-left: 12px;
  position: relative;
}
.promise-list li::before{
  content: "‚Ä¢";
  position: absolute;
  left: 0;
  color: var(--brand);
}

/* Markdown pages no longer include a top-level H1; DocLayout renders the single H1. */


/* Buttons used in header/nav */
.nav-btn,
.btn{
  appearance:none;
  background: transparent;
  color: var(--muted);
  border: 1px solid var(--border);
  padding: 6px 10px;
  border-radius: 12px;
  font-weight: 900;
  cursor: pointer;
}

/* Primary CTA button variant */
.btn.primary{
  background: var(--brand);
  /* Improve contrast in dark mode (brand is bright). */
  color: #0b1220;
  border-color: transparent;
  text-shadow: none;
}
@media (prefers-color-scheme: light){
  /* Light mode brand is dark -> white text stays best. */
  .btn.primary{ color: white; }
}
.btn.primary:hover{
  background: color-mix(in srgb, var(--brand) 82%, black);
  color: #0b1220;
}
@media (prefers-color-scheme: light){
  .btn.primary:hover{ color: white; }
}
.nav-btn:hover,
.btn:hover{
  background: color-mix(in srgb, var(--card) 70%, transparent);
  color: var(--fg);
}
.nav-btn:focus-visible,
.btn:focus-visible{
  outline:2px solid var(--brand);
  outline-offset:2px;
}

/* Page hero call-to-action row */
.hero-actions{
  display:flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-top: 12px;
}
.hero-actions .btn{
  text-decoration:none;
  display:inline-flex;
  align-items:center;
  justify-content:center;
}
@media (max-width: 520px){
  .hero-actions{ flex-direction: column; }
  .hero-actions .btn{ width: 100%; }
}

/* Mobile menu button visibility */
.mobileBtn{ display:none; }
@media (max-width: 900px){
  .mobileBtn{ display:inline-flex; }
  /* Hide desktop nav on small screens (specificity must beat .site-header .nav earlier). */
  .site-header .nav{ display:none; }

  /* Make mobile header a touch taller so the menu button clears the progress line */
  .header-row{ padding: 12px 0 14px; }
  .site-header{ padding-bottom: 3px; }

  html:not(.js) .header-row{ flex-wrap: wrap; align-items: flex-start; }
  html:not(.js) .site-header .nav{ display:flex; flex-wrap: wrap; gap: 10px; margin-left: 0; }
  html:not(.js) .mobileBtn{ display:none; }
  html:not(.js) .top-search{ max-width: none; }
}



/* Tiny screens: reduce chrome in the sticky header */
@media (max-width: 520px){
  .brand-text{ display:none; }
  .brand{ gap: 12px; }
}
@media (max-width: 420px){
  .brand-mark{ width:24px; height:24px; border-radius:9px; font-size:.82rem; }
}
@media (max-width: 360px){
  .brand-mark{ display:none; }
}

/* Drawer (mobile menu) */
.drawer{
  position: fixed;
  inset: 0;
  display: none;
  z-index: 110;
}
.drawer.open{ display:block; }
.drawer .backdrop{
  position:absolute;
  inset:0;
  background: rgba(0,0,0,.70);
}
.drawer .panel{
  position:absolute;
  top: 0;
  left: 0;
  height: 100%;
  width: min(420px, 92vw);
  background: color-mix(in srgb, var(--bg) 88%, black);
  border-right: 1px solid var(--border);
  padding: calc(14px + env(safe-area-inset-top)) 14px calc(18px + env(safe-area-inset-bottom));
  overflow:auto;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
}
.drawer-head{ display:flex; justify-content:space-between; align-items:center; gap:10px; }
.drawer-title{ margin:0; font-size: 1.05rem; }
.drawer .hr{ margin: 12px 0; border-top:1px solid var(--border); opacity:.9; }

.drawer-links{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
}
.drawer-links a{
  display:inline-flex;
  color: var(--muted);
  border:1px solid var(--border);
  border-radius:999px;
  padding:6px 10px;
  text-decoration:none;
  font-weight: 900;
}
.drawer-links a:hover{ color: var(--fg); background: color-mix(in srgb, var(--card) 70%, transparent); }

.drawer-group{ margin: 14px 0 12px; }
.drawer-group .kicker{ margin: 0 0 8px; }
.drawer-list a{
  display:block;
  padding: 6px 2px;
  color: var(--muted);
  text-decoration:none;
  border-radius: 10px;

  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;}
.drawer-list a:hover{ color: var(--fg); background: color-mix(in srgb, var(--card) 70%, transparent); }

/* Drawer: accordion chapters + recent list */
.recent-list .small{ font-size: .93rem; }
.recent-list a{ display:block; padding: 6px 2px; }

.drawer-accordion{
  display:block;
}
.drawer-col{
  border: 1px solid var(--border);
  border-radius: 16px;
  background: color-mix(in srgb, var(--card) 92%, transparent);
  margin: 10px 0;
  overflow: hidden;
}
.drawer-col[open]{
  background: color-mix(in srgb, var(--card) 96%, transparent);
}
.drawer-summary{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding: 10px 12px;
  cursor:pointer;
  font-weight: 850;
  list-style:none;
}
.drawer-summary::-webkit-details-marker{ display:none; }
.drawer-summary-count{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-width: 26px;
  height: 20px;
  padding: 0 8px;
  border-radius: 999px;
  border: 1px solid var(--border);
  color: var(--muted);
  font-weight: 800;
  font-size: .85rem;
}
.drawer-col-body{
  padding: 6px 10px 10px;
  border-top: 1px solid var(--border);
}
.drawer-col-body a.mega-link{
  display:block;
  padding: 8px 10px;
  border-radius: 12px;
  color: var(--muted);
  text-decoration:none;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Drawer: Themen should show full labels (no ellipsis) */
.drawer-col-themen .drawer-col-body a.mega-link{
  white-space: normal;
  overflow: visible;
  text-overflow: clip;
}

/* Indent Plattformen children inside Themen */
.drawer-col-themen .drawer-indent{
  margin-left: 12px;
}

/* Nested dropdown (e.g. Linux subpages) inside Themen */
.drawer-sub{
  margin-top: 6px;
  border: 1px solid var(--border);
  border-radius: 14px;
  background: color-mix(in srgb, var(--card) 82%, transparent);
  overflow: hidden;
}
.drawer-sub > summary{ list-style: none; }
.drawer-sub > summary::-webkit-details-marker{ display:none; }
.drawer-sub-summary{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.drawer-sub-summary .drawer-sub-parent{ flex: 1; }
.drawer-sub-summary .caret{
  width: 10px;
  height: 10px;
  border-right: 2px solid var(--muted);
  border-bottom: 2px solid var(--muted);
  transform: rotate(-45deg);
  margin-right: 12px;
  opacity: .85;
}
.drawer-sub[open] .drawer-sub-summary .caret{ transform: rotate(45deg); }
.drawer-sub-body{
  padding: 6px 10px 10px;
  border-top: 1px solid var(--border);
}
.drawer-sub-body a.mega-link{
  display:block;
  padding: 8px 10px;
  border-radius: 12px;
  color: var(--muted);
  text-decoration:none;
}
.drawer-sub-body a.mega-link.drawer-sub-child{ padding-left: 28px; }

.drawer-col-body a.mega-link:hover{
  color: var(--fg);
  background: color-mix(in srgb, var(--card) 70%, transparent);
}
.drawer-more{
  display:block;
  margin-top: 6px;
  padding: 8px 10px;
  border-radius: 12px;
  color: var(--muted);
  text-decoration:none;
  font-weight: 850;
}
.drawer-more:hover{
  color: var(--fg);
  background: color-mix(in srgb, var(--card) 70%, transparent);
}

/* Drawer search (mobile): same index, different UI container */
.drawer-search{ position: relative; }
.drawer-search input[type="search"]{
  width: 100%;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--bg) 70%, transparent);
  color: var(--fg);
  font-size: 16px; /* prevent iOS zoom */
  outline: none;
}
.drawer-search input[type="search"]::placeholder{ color: color-mix(in srgb, var(--muted) 80%, transparent); }
.drawer-search .search-results{
  position: static;
  margin-top: 10px;
  display: none;
  border: 1px solid var(--border);
  border-radius: 14px;
  background: color-mix(in srgb, var(--bg) 65%, transparent);
  /* Allow scrolling for results (esp. with mobile keyboard open) */
  max-height: min(45vh, 420px);
  overflow-y: auto;
  overflow-x: hidden;
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
}
.drawer-search .search-results.open{ display: block; }
.drawer-search .search-results a{
  display: block;
  padding: 10px 12px;
  border-top: 1px solid color-mix(in srgb, var(--border) 80%, transparent);
  color: var(--fg);
  text-decoration: none;
}
.drawer-search .search-results a:first-child{ border-top: 0; }
.drawer-search .search-results a:hover{
  background: color-mix(in srgb, var(--card) 70%, transparent);
  text-decoration: none;
}
.drawer-search .search-results .t{ font-weight: 850; }
.drawer-search .search-results .d{ color: var(--muted); font-size: .95rem; margin-top: 2px; }
.drawer-search .search-results .meta{ color: var(--muted); font-size: .85rem; margin-top: 4px; }

/* Mega menu: force dark background */
.mega-grid{
  background: var(--card);
  backdrop-filter: none;
  }
.mega-grid a.mega-link{
  color: var(--muted);
}
.mega-grid a.mega-link:hover{
  color: var(--fg);
}


/* Header nav button should look like nav links (no border pill) */
.nav-btn{
  border: 0;
  padding: 4px 8px;
  border-radius: 10px;
  font-size: .95rem;
  background: transparent;
  color: var(--muted);
  font-weight: 800;
}
.nav-btn:hover{
  background: color-mix(in srgb,var(--card) 70%,transparent);
  color: var(--fg);
}


/* Mega menu TOC (left column inside Kapitel dropdown) */
.mega-toc-col{ min-width: 260px; }
.mega-toc{ list-style:none; padding:0; margin: 10px 0 0; display:flex; flex-direction:column; gap:6px; max-height: none; overflow: visible; }
.mega-toc li.h3{ padding-left: 14px; }


/* ===== Page hero (breadcrumbs + H1 + sub) aligned like live site ===== */
.page-hero{
  padding: 18px 0 10px;
  max-width: var(--max);
  margin: 0 auto;
}
.page-hero .breadcrumbs{
  margin: 6px 0 14px;
  color: var(--muted);
  font-size: .95rem;
}
.page-title{
  margin: 0 0 10px;
  font-size: var(--h1);
  letter-spacing: -0.02em;
}
.page-sub{
  margin: 0 0 14px;
  color: var(--muted);
  max-width: 70ch;
}
.page-meta{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  color: var(--muted);
  font-size: .92rem;
}
.page-meta .dot{ opacity:.7; }


/* Layout breathing room */
.layout{ margin-top: 10px; }

/* ===== Sticky Pfad A/B/C toggle (mobile friendly) ===== */
.pfad-sticky{ display:none; }
html.js .pfad-sticky{
  position: sticky;
  top: calc(var(--site-header-h, 56px) + 10px);
  z-index: 60;
  margin: 6px 0 14px;
}
.noscript-note{ margin: 10px 0 14px; }
.pfad-bar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;
  padding: 10px 12px;
  border: 1px solid var(--border);
  border-radius: 16px;
  background: color-mix(in srgb, var(--bg) 70%, transparent);
  backdrop-filter:saturate(140%) blur(10px);
  box-shadow: 0 10px 24px rgba(0,0,0,.14);
}
.pfad-left{
  display:flex;
  align-items:center;
  gap: 12px;
  min-width: 0;
}
.pfad-label{
  color: var(--muted);
  font-size: .92rem;
  font-weight: 750;
}
.pfad-seg{
  display:flex;
  border: 1px solid var(--border);
  border-radius: 14px;
  overflow:hidden;
  background: color-mix(in srgb, var(--card) 80%, transparent);
}
.pfad-opt{ position: relative; display:inline-flex; }
.pfad-opt input{
  position:absolute;
  inset: 0;
  opacity: 0;
  cursor:pointer;
}
.pfad-opt span{
  display:block;
  padding: 8px 12px;
  min-width: 44px;
  text-align:center;
  font-weight: 850;
  letter-spacing: .02em;
  color: var(--muted);
  user-select:none;
}
.pfad-opt input:focus-visible + span{
  outline: 2px solid var(--brand);
  outline-offset: -2px;
}
.pfad-opt input:checked + span{
  background: color-mix(in srgb, var(--brand) 16%, transparent);
  color: var(--fg);
}
.pfad-hint{
  display:flex;
  align-items:center;
  gap: 8px;
  color: var(--muted);
  font-size: .92rem;
  white-space: nowrap;
}
.pfad-hint .dot{ opacity: .7; }

@media (max-width: 520px){
  .pfad-bar{ padding: 10px 10px; border-radius: 18px; }
  .pfad-label{ display:none; }
  .pfad-hint{ display:none; }
  .pfad-opt span{ padding: 10px 12px; min-width: 48px; }
}

/* ===== Mobile friendliness extras (no desktop regressions) ===== */

/* Media inside markdown should never overflow */
.article-body img{ max-width: 100%; height: auto; }

/* Code blocks: horizontal scroll instead of layout break */
.article-body pre{
  overflow: auto;
  -webkit-overflow-scrolling: touch;
  padding: 12px 14px;
  border: 1px solid var(--border);
  border-radius: 14px;
  background: color-mix(in srgb,var(--bg) 75%,transparent);
}
.article-body pre code{
  display: block;
  padding: 0;
  border: 0;
  background: transparent;
  white-space: pre;
  word-break: normal;
}

@media (max-width: 520px){
  .container{ padding: 0 14px; }
  .hero-inner{ padding: 10px 14px 0; }

  .page-hero{ padding: 14px 0 8px; }
  .page-title{ letter-spacing: -0.015em; }

  .hero-card{ padding: 16px 14px; }
  .article-body{ padding: 16px 14px 20px; }

  /* slightly tighter chips/cards */
  .chip{ padding: 6px 9px; }
  .card{ padding: 12px 12px 10px; }
}

@media (max-width: 360px){
  .header-row{ gap: 10px; }
  /* Keep PB mark visible; truncate only the text */
  .brand{ max-width: 100%; }
  .brand-mark{ width:26px; height:26px; border-radius:9px; font-size:.88rem; }
  .brand-text{ max-width: calc(100% - 42px); }
}


/* === Content <details>/<summary> (sichtbar als aufklappbar) === */
.article-body.markdown details:not(.callout){
  margin: 14px 0;
  border: 1px solid var(--border);
  border-radius: calc(var(--radius) + 2px);
  background: color-mix(in srgb, var(--card) 70%, transparent);
  /* Wichtig: nicht clippen, sonst werden List-Marker (1., 2., ‚Ä¶) abgeschnitten */
  overflow: visible;
}
.article-body.markdown details:not(.callout) > summary{
  list-style: none;
  cursor: pointer;
  padding: 10px 12px;
  font-weight: 650;
  color: var(--fg);
  display: flex;
  align-items: flex-end;
  gap: 10px;
  border-radius: calc(var(--radius) + 1px);
}
.article-body.markdown details:not(.callout) > summary::-webkit-details-marker{ display:none; }
.article-body.markdown details:not(.callout) > summary:hover{
  background: color-mix(in srgb, var(--card) 86%, transparent);
}
.article-body.markdown details:not(.callout) > summary:focus-visible{
  outline: 2px solid color-mix(in srgb, var(--accent) 70%, transparent);
  outline-offset: 2px;
}
.article-body.markdown details:not(.callout) > summary::after{
  content: "‚ñ∏";
  margin-left: auto;
  opacity: .85;
  transform: translateY(-1px);
  transition: transform .15s ease;
}
.article-body.markdown details:not(.callout)[open] > summary{
  background: color-mix(in srgb, var(--card) 82%, transparent);
  border-bottom: 1px solid var(--border);
}
.article-body.markdown details:not(.callout)[open] > summary::after{
  transform: rotate(90deg);
}
.article-body.markdown details:not(.callout) > :not(summary){
  padding: 0 16px 14px;
}
.article-body.markdown details:not(.callout) > :not(summary):first-child{ padding-top: 10px; }

/* Listen innerhalb von <details> brauchen etwas mehr Einzug (sonst wirkt's gequetscht) */
.article-body.markdown details:not(.callout) ol,
.article-body.markdown details:not(.callout) ul{
  margin-left: 0;
}
.article-body.markdown details:not(.callout) ol{ padding-left: 22px; }
.article-body.markdown details:not(.callout) ul{ padding-left: 22px; }
/* Mobile: <details>/<summary> als echtes Accordion erkennbar + touch-friendly */
@media (max-width: 640px){
  .article-body.markdown details:not(.callout){
    margin: 12px 0;
    border-radius: calc(var(--radius) + 4px);
  }
  .article-body.markdown details:not(.callout) > summary{
    padding: 12px 14px;
    gap: 12px;
    min-height: 48px; /* komfortables Tap-Target */
    line-height: 1.25;
    align-items: flex-start; /* besser bei mehrzeiligen √úberschriften */
  }
  .article-body.markdown details:not(.callout) > summary::after{
    align-self: center;
    padding-left: 10px;
    transform: translateY(1px);
  }
  .article-body.markdown details:not(.callout)[open] > summary::after{
    transform: translateY(1px) rotate(90deg);
  }
  .article-body.markdown details:not(.callout) > :not(summary){
    padding: 0 14px 14px;
  }
  .article-body.markdown details:not(.callout) ol{ padding-left: 20px; }
  .article-body.markdown details:not(.callout) ul{ padding-left: 20px; }
}

@media (hover: none){
  .article-body.markdown details:not(.callout) > summary:hover{ background: transparent; }
  .article-body.markdown details:not(.callout) > summary:active{
    background: color-mix(in srgb, var(--card) 90%, transparent);
  }
}

/* Interactive markdown checkboxes (task lists)
   - Astro/remark task lists are rendered as <input disabled>
   - nav.js re-enables them for self-checks.
*/
.article-body.markdown input.pb-md-task{
  cursor: pointer;
}
.article-body.markdown li > input.pb-md-task{
  margin-right: 10px;
}


/* Prevent background scroll when mega menu is open */
body.mega-open{ overflow:hidden; }

/* Prevent background scroll when the mobile drawer is open */
body.drawer-open{ overflow:hidden; }


/* ===== Mega dialog header + active states ===== */
.mega-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  margin: 0 0 10px;
}
.mega-dialog-title{
  margin: 0;
  font-size: 1.05rem;
  font-weight: 850;
  letter-spacing: -0.01em;
}
.mega-col-title{
  color: var(--fg);
  text-decoration:none;
}
.mega-col-title:hover{ text-decoration: underline; }
.mega-col-title:focus-visible{
  outline:2px solid var(--brand);
  outline-offset:2px;
  border-radius: 10px;
}
.mega-link.active,
.mega-col-title.active{
  color: var(--fg);
  background: color-mix(in srgb, var(--brand) 10%, transparent);
  border-color: color-mix(in srgb, var(--brand) 35%, var(--border));
}
.drawer .mega-link.active{
  color: var(--fg);
  background: color-mix(in srgb, var(--brand) 10%, transparent);
}

/* Search keyboard highlight */
.search-results a.kbd-active{
  outline:2px solid var(--brand);
  outline-offset:2px;
  background: color-mix(in srgb, var(--brand) 10%, var(--card));
}
.search-empty{
  border:1px solid var(--border);
  border-radius: 12px;
  padding: 10px 12px;
  color: var(--muted);
  background: color-mix(in srgb, var(--card) 92%, transparent);
}
.search-empty strong{ color: var(--fg); }

/* Mobile TOC indentation */
.toc nav a.h3{ padding-left: 18px; font-size: .95rem; }

/* Prev/Next at end of article */
.prevnext{
  display:flex;
  gap: 12px;
  margin-top: 16px;
}
.prevnext.single{ justify-content:flex-end; }
.prevnext a{
  flex: 1 1 0;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 12px 14px;
  text-decoration:none;
  background: color-mix(in srgb, var(--card) 92%, transparent);
  box-shadow: var(--shadow);
}
.prevnext a:hover{
  border-color: color-mix(in srgb, var(--brand) 35%, var(--border));
}
.prevnext a:focus-visible{
  outline:2px solid var(--brand);
  outline-offset:2px;
}
.prevnext .k{
  font-size: .78rem;
  color: var(--muted);
  letter-spacing: .08em;
  text-transform: uppercase;
}
.prevnext .t{
  margin-top: 4px;
  color: var(--fg);
  font-weight: 850;
  letter-spacing: -0.01em;
}
@media (max-width: 700px){
  .prevnext{ flex-direction: column; }
}


/* Search page: keep spacing without inline styles (CSP friendly) */
.search-tip{margin-top:10px}

/* Anbieter-Verzeichnis (/anbieter/): premium UI (cards + badges) */
.anbieter-panel{
  border: 1px solid var(--border);
  border-radius: 18px;
  background: color-mix(in srgb, var(--card) 92%, transparent);
  box-shadow: var(--shadow);
  padding: 14px;
}

.anbieter-toolbar{
  display: flex;
  gap: 10px;
  align-items: flex-end;
  flex-wrap: wrap;
}

/* Filter fields with visible labels (better scannability) */
.anbieter-page .filter-field{
  display:flex;
  flex-direction:column;
  gap:6px;
  flex: 1 1 220px;
  min-width: 0;
}
.anbieter-page .filter-field.filter-search{ flex: 2 1 320px; }
.anbieter-page .filter-label{
  font-size: .85rem;
  color: var(--muted);
  font-weight: 750;
  letter-spacing: .02em;
}
.anbieter-page .filter-field :is(select, input[type="search"]){ width: 100%; }

/* Override the search-page max-width so the search field can align with filters */
.anbieter-page input[type="search"]{
  max-width: none;
  /* IMPORTANT: don't set flex-basis here.
     The search input sits inside a column-flex label; a flex-basis would become its *height*.
     Keep sizing controlled by the wrapper (.filter-search) and the explicit height rule below. */
  flex: none;
}

.anbieter-reset{
  height: 38px;
  padding: 0 12px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--card) 92%, transparent);
  color: var(--muted);
  cursor: pointer;
}

.anbieter-reset:hover{
  border-color: color-mix(in srgb, var(--brand) 35%, var(--border));
}

.anbieter-reset:focus-visible{
  outline: 2px solid var(--brand);
  outline-offset: 2px;
}

.anbieter-view-toggle{
  display: inline-flex;
  height: 38px;
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
}

.anbieter-view-toggle .toggle-btn{
  height: 38px;
  padding: 0 12px;
  border: 0;
  background: transparent;
  color: var(--muted);
  cursor: pointer;
}

.anbieter-view-toggle .toggle-btn.is-active{
  background: color-mix(in srgb, var(--card) 92%, transparent);
  color: var(--fg);
  font-weight: 850;
}

.anbieter-view-toggle .toggle-btn:hover{
  background: color-mix(in srgb, var(--card) 88%, transparent);
  color: var(--fg);
}

.anbieter-view-toggle .toggle-btn:focus-visible{
  outline: 2px solid var(--brand);
  outline-offset: -2px;
}

/* Vergleichstabelle (JS-Ansicht) */
.anbieter-table-scroll{
  margin-top: 14px;
  overflow-x: auto;
  border: 1px solid var(--border);
  border-radius: 18px;
  background: color-mix(in srgb, var(--card) 92%, transparent);
  box-shadow: var(--shadow);
}

.anbieter-table{
  width: 100%;
  border-collapse: collapse;
  min-width: 980px;
}

.anbieter-table :is(th, td){
  padding: 10px 12px;
  border-bottom: 1px solid var(--border);
  vertical-align: top;
  font-size: .95rem;
}

.anbieter-table th{
  text-align: left;
  font-weight: 900;
  position: sticky;
  top: 0;
  background: color-mix(in srgb, var(--card) 98%, transparent);
  z-index: 1;
}

.anbieter-table tr:hover td{
  background: color-mix(in srgb, var(--card) 96%, transparent);
}

.anbieter-table-link{
  text-decoration: none;
  font-weight: 850;
}

.anbieter-table-link:hover{ text-decoration: underline; }


.anbieter-page .anbieter-filters{
  margin-top: 10px;
  gap: 10px;
}

.anbieter-page :is(select, input[type="search"]){
  height: 38px;
}

.anbieter-page .filter-check{
  min-height: 38px;
}

.anbieter-meta{
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  margin-top: 10px;
}

/* Results list should align with the outer edge of the filter panel above */
.anbieter-page .provider-results{
  margin-top: 14px;
  padding-inline: 0;
}

/* Override markdown default UL padding inside the article body */
.article-body ul.provider-list{
  padding-left: 0;
  margin-left: 0;
}

.provider-list{
  list-style: none;
  margin: 0;
  padding: 0;
  display: grid;
  gap: 14px;
  grid-template-columns: 1fr;
}

/* Responsive grid: 2 / 3 / 4 columns when there's room */
@media (min-width: 760px){
  .provider-list{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media (min-width: 1100px){
  .provider-list{ grid-template-columns: repeat(3, minmax(0, 1fr)); }
}
@media (min-width: 1400px){
  .provider-list{ grid-template-columns: repeat(4, minmax(0, 1fr)); }
}

.provider-card{
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--card) 92%, transparent);
  border-radius: 18px;
  padding: 14px 16px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  min-height: 108px;
  box-shadow: var(--shadow);
}

.provider-card:hover{
  border-color: color-mix(in srgb, var(--brand) 35%, var(--border));
  background: color-mix(in srgb, var(--card) 96%, transparent);
}

.provider-name{
  display: inline-block;
  font-weight: 850;
  letter-spacing: -0.01em;
  font-size: 1.05rem;
  text-decoration: none;
}

.provider-name:hover{ text-decoration: underline; }

/* Provider index: small secondary action (external website) */
.provider-head{
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 10px;
}

.provider-direct{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 0.85rem;
  text-decoration: none;
  opacity: 0.8;
  border: 1px solid color-mix(in srgb, var(--border) 80%, transparent);
  border-radius: 999px;
  padding: 2px 8px;
  white-space: nowrap;
}

.provider-direct:hover{ opacity: 1; text-decoration: underline; }

.provider-badges{
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 0;
}

.badge{
  display: inline-flex;
  align-items: flex-end;
  border: 1px solid color-mix(in srgb, var(--border) 85%, transparent);
  background: color-mix(in srgb, var(--card) 90%, transparent);
  border-radius: 999px;
  padding: 4px 10px;
  font-size: 13px;
  line-height: 1.2;
}

.badge-muted{ opacity: 0.82; }
.badge-good{ border-color: rgba(0,255,120,0.25); }
.badge-bad{ border-color: rgba(255,80,80,0.25); }
.badge-warn{ border-color: rgba(255,200,80,0.25); }


/* ===== Mega menu (Kapitel): weniger √úberforderung =====
   Ziel: Statt 100+ Links auf einmal werden Kapitel standardm√§√üig eingeklappt
   (progressive enhancement, kein Inline, kein JS n√∂tig).
*/
.mega-intro{
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 18px;
  padding: 14px 14px;
  /* Do not stretch to the full height of the mega grid row.
     This keeps the border from running to the bottom of the whole dropdown. */
  align-self: start;
  height: max-content;
}
.mega-intro .kicker{
  margin-bottom: 8px;
}
.mega-quick{
  display:block;
  padding: 8px 10px;
  border-radius: 12px;
  text-decoration:none;
  color: var(--fg);
  border: 1px solid var(--border);
  background: transparent;
  margin: 8px 0;
}
.mega-quick:hover{
  background: color-mix(in srgb, var(--card) 70%, transparent);
}
.mega-hint{
  color: var(--muted);
  font-size: .92rem;
  margin-top: 10px;
  line-height: 1.35;
}

/* Accordion-like Kapitel */
details.mega-col{
  padding: 0;
  overflow: hidden;
}
details.mega-col > summary{
  list-style: none;
}
details.mega-col > summary::-webkit-details-marker{
  display:none;
}
.mega-summary{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
  cursor:pointer;
  padding: 12px 12px;
  border-radius: 18px;
  color: var(--fg);
  font-weight: 900;
}
details.mega-col[open] .mega-summary{
  background: color-mix(in srgb, var(--card) 70%, transparent);
}
.mega-summary-title{
  font-size: .95rem;
  letter-spacing: .2px;
}
.mega-summary-count{
  color: var(--muted);
  font-size: .85rem;
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: 2px 8px;
  /* Prevent wrapping like "7\nThemen" inside the badge */
  white-space: nowrap;
  flex-shrink: 0;
}

/* Mega-Men√º: mehr Kontext ohne √úberforderung (Preview + "Themen" Label) */
.mega-summary-main{
  display:flex;
  flex-direction:column;
  gap: 4px;
  min-width: 0;
}
.mega-summary-preview{
  font-weight: 600;
  font-size: .80rem;
  line-height: 1.15;
  color: var(--muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 42ch;
}
details.mega-col[open] .mega-summary-preview{
  display:none;
}
@media (max-width: 900px){
  .mega-summary-preview{ max-width: 30ch; }
}
.mega-summary-count::after{ content:" Themen"; }

@media (max-width: 700px){
  .mega-summary-count{ font-size: .80rem; padding: 2px 7px; }
}

.mega-col-body{
  padding: 6px 10px 12px;
  border-top: 1px solid var(--border);
}
.mega-col-body .mega-col-title{
  display:block;
  margin: 4px 0 8px;
}

/* Weniger visuelles Rauschen: Links im Kapitel etwas kompakter */
.mega-col-body a.mega-link{
  padding: 7px 10px;
}


/* Mega-Men√º: Progressive Disclosure √ºber Kapitel-Gruppen
   -> Standard: 8 Hauptbereiche + "Mehr" f√ºr den Rest
*/
details.mega-more .mega-summary-title{ font-size: .95rem; }
.mega-count-chapters::after{ content:" Kapitel"; }

.mega-more-body{
  padding: 12px 12px 14px;
}

.mega-more-grid{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 18px;
}

/* Im "Mehr"-Block wirken die Kapitel wie eigenst√§ndige Karten */
details.mega-more .mega-more-grid details.mega-col{
  border: 1px solid var(--border);
  border-radius: 18px;
  background: color-mix(in srgb, var(--card) 96%, transparent);
}

details.mega-more .mega-more-grid details.mega-col[open]{
  background: color-mix(in srgb, var(--card) 98%, transparent);
}

/* ===== Mega-Men√º: "Mobile" Kapitel-Layout auch am Desktop ===== */
.mega-grid.mega-grid-simple{
  /* default keeps existing grid behavior on narrow widths */
}

@media (min-width: 901px){
  .mega-grid.mega-grid-simple{
    /* Zwei Spalten wie mobil: links Schnellstart, rechts Kapitel-Liste */
    grid-template-columns: 340px 1fr;
    align-items: start;
  }
}

.mega-chapters .kicker{ margin-top: 0; }

.mega-accordion{
  display:flex;
  flex-direction: column;
  gap: 10px;
}

details.mega-col.mega-col-compact{
  border: 1px solid var(--border);
  border-radius: 18px;
  background: color-mix(in srgb, var(--card) 92%, transparent);
}

details.mega-col.mega-col-compact[open]{
  background: color-mix(in srgb, var(--card) 96%, transparent);
}

/* Preview nur im geschlossenen Zustand sichtbar */
details.mega-col.mega-col-compact[open] .mega-summary-preview{ display:none; }

/* Etwas kompaktere Spacing im Desktop-Mega */
.mega-col.mega-col-compact .mega-summary{ padding: 10px 12px; }
.mega-col.mega-col-compact .mega-col-body{ padding: 6px 10px 10px; }



/* === Anbieter index: progressive enhancement / No-JS fallback === */
.anbieter-page .js-only{ display:none; }
html.js .anbieter-page .js-only{ display:block; }
html.js .anbieter-page .no-js-note{ display:none; }

/* Prevent horizontal overflow from long names/URLs on small screens */
.provider-name{ overflow-wrap:anywhere; }
.article-body{ overflow-wrap:anywhere; }

/* Anbieter index: category quickjump (No-JS friendly) */
.anbieter-quickcats{ margin: 10px 0 16px; }
.anbieter-quickcats .quickcats-row{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin: 0 0 6px;
}
.anbieter-quickcats .muted{ margin: 0; }

/* Kategorie-√úberschriften innerhalb der Anbieter-Liste */
.provider-group-title{
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  gap:10px;
  margin: 18px 0 8px;
  padding: 10px 10px;
  border-top: 1px solid var(--border);
  color: var(--fg);
  font-weight: 900;
}
.provider-group-title:first-child{ border-top: 0; margin-top: 0; }
.provider-group-title span:last-child{
  color: var(--muted);
  font-weight: 850;
  font-size: .88rem;
}

/* Anbieter index: "Mehr laden" footer (Variante B) */
.anbieter-footer{
  /* Button soll mittig unter dem Grid sitzen (zwischen 2. und 3. Karte),
     Z√§hler bleibt links. */
  display:grid;
  grid-template-columns: 1fr auto 1fr;
  align-items:center;
  gap: 14px;
  margin-top: 14px;
}

.anbieter-footer span{
  justify-self: start;
}

.anbieter-footer .btn{
  justify-self: center;
  white-space: nowrap;
  padding: 12px 22px;
  font-size: 1.05rem;
  min-width: 190px;
}

@media (max-width: 720px){
  .anbieter-footer{
    grid-template-columns: 1fr;
    justify-items: center;
    text-align: center;
  }
  .anbieter-footer span{ justify-self: center; }
  .anbieter-footer .btn{ width: min(340px, 100%); }
}

@media (max-width: 420px){
  .anbieter-toolbar input[type="search"]{ flex: 1 1 100%; }
  .anbieter-reset{ width: 100%; }
  .anbieter-page .filter-row select{ min-width: 0; flex: 1 1 100%; width: 100%; }
}

/* === Global progressive enhancement helper === */
.js-only{ display:none; }
html.js .js-only{ display:block; }

/* === Wizard (Privacy‚ÄëPlan) === */
.wizard{ margin: 18px 0 8px; }
.wizard-progress{ margin: 10px 0 14px; }
.wizard-progress-bar{
  height: 10px;
  width: 100%;
  border-radius: 999px;
  border: 1px solid var(--border);
  overflow: hidden;
  appearance:none;
  background: color-mix(in srgb, var(--bg) 72%, transparent);
}
.wizard-progress-bar::-webkit-progress-bar{background: color-mix(in srgb, var(--bg) 72%, transparent); border-radius: 999px;}
.wizard-progress-bar::-webkit-progress-value{background: color-mix(in srgb, var(--brand) 65%, var(--card)); border-radius: 999px;}
.wizard-progress-bar::-moz-progress-bar{background: color-mix(in srgb, var(--brand) 65%, var(--card)); border-radius: 999px;}

/* (legacy) fill div fallback */
.wizard-progress-fill{ display:none; }
.wizard-progress-steps{
  display:flex;
  flex-wrap:wrap;
  gap: 8px;
  margin-top: 10px;
}
.wizard-progress-step{
  font-size: .90rem;
  color: var(--muted);
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: 4px 9px;
}
.wizard-progress-step.active{
  color: var(--fg);
  border-color: color-mix(in srgb, var(--brand) 45%, var(--border));
  background: color-mix(in srgb, var(--card) 75%, transparent);
}

.wizard-step > h2{ margin-top: 6px; }

.wizard-grid{
  display:grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 14px;
  margin-top: 12px;
}
@media (max-width: 760px){
  .wizard-grid{ grid-template-columns: 1fr; }
}

.wizard-fieldset{
  border:1px solid var(--border);
  border-radius: var(--radius);
  padding: 12px 12px;
  background: color-mix(in srgb, var(--bg) 78%, transparent);
}
.wizard-fieldset legend{ padding: 0 6px; color: var(--muted); font-weight: 800; }

.wizard-choice{
  display:flex;
  align-items:flex-start;
  gap: 10px;
  padding: 10px 10px;
  border-radius: 12px;
  border: 1px solid transparent;
  cursor:pointer;
}
.wizard-choice:hover{ background: color-mix(in srgb, var(--card) 70%, transparent); border-color: var(--border); }
.wizard-choice input{ margin-top: 2px; }

.wizard-goals{
  display:grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 12px;
  margin-top: 12px;
}
@media (max-width: 760px){
  .wizard-goals{ grid-template-columns: 1fr; }
}
.wizard-goal{
  display:flex;
  gap: 10px;
  border:1px solid var(--border);
  border-radius: var(--radius);
  padding: 12px 12px;
  background: color-mix(in srgb, var(--bg) 75%, transparent);
  cursor:pointer;
}
.wizard-goal:hover{ background: color-mix(in srgb, var(--card) 70%, transparent); }
.wizard-goal input{ margin-top: 2px; }
.wizard-goal-title{ font-weight: 950; letter-spacing: -.1px; }
.wizard-goal-hint{ margin-top: 2px; color: var(--muted); font-size: .95rem; }
@supports(selector(:has(*))){
  .wizard-goal:has(input:checked){
    border-color: color-mix(in srgb, var(--brand) 45%, var(--border));
    background: color-mix(in srgb, var(--card) 80%, transparent);
  }
}

.wizard-levels,
.wizard-times{
  display:grid;
  grid-template-columns: 1fr;
  gap: 10px;
  margin-top: 12px;
}
.wizard-radio{
  display:flex;
  gap: 10px;
  align-items:flex-start;
  border:1px solid var(--border);
  border-radius: var(--radius);
  padding: 10px 12px;
  background: color-mix(in srgb, var(--bg) 75%, transparent);
  cursor:pointer;
}
.wizard-radio:hover{ background: color-mix(in srgb, var(--card) 70%, transparent); }
.wizard-radio input{ margin-top: 2px; }

.wizard-nav{
  display:flex;
  gap: 10px;
  margin-top: 16px;
  flex-wrap:wrap;
}
.wizard-reset{ margin-left:auto; }
@media (max-width: 560px){
  .wizard-reset{ margin-left: 0; width: 100%; }
  .wizard-nav .btn{ width: 100%; justify-content:center; }
}

.wizard-plan{
  margin: 12px 0 8px;
  padding-left: 22px;
}
.wizard-plan-item{ margin: 10px 0; }
.wizard-plan-link{
  display:block;
  border:1px solid var(--border);
  border-radius: var(--radius);
  padding: 12px 12px;
  background: color-mix(in srgb, var(--bg) 74%, transparent);
  color: var(--fg);
  text-decoration:none;
}
.wizard-plan-link:hover{ background: color-mix(in srgb, var(--card) 70%, transparent); }
.wizard-plan-top{ display:flex; gap: 10px; align-items:baseline; justify-content:space-between; }
.wizard-plan-title{ font-weight: 950; letter-spacing: -.1px; }
.wizard-plan-sub{ margin-top: 4px; }
.wizard-pill{
  font-size: .80rem;
  color: var(--muted);
  border:1px solid var(--border);
  border-radius: 999px;
  padding: 2px 8px;
  white-space: nowrap;
}

.wizard-chapter{ margin-top: 10px; }
.wizard-links{ margin: 10px 0 0; padding-left: 18px; }
.wizard-links a.is-recommended{
  font-weight: 900;
  text-decoration: underline;
}

/* Wizard: personalisierte Checkliste */
.wizard-checklist-meta{ margin: 10px 0 14px; }
.wizard-checklist-top{ display:flex; align-items:center; justify-content:space-between; gap: 10px; flex-wrap:wrap; }
.wizard-mini-bar{
  flex: 1;
  min-width: 180px;
  height: 10px;
  border-radius: 999px;
  overflow: hidden;
  appearance:none;
  background: color-mix(in srgb, var(--border) 45%, transparent);
}
.wizard-mini-bar::-webkit-progress-bar{background: color-mix(in srgb, var(--border) 45%, transparent); border-radius: 999px;}
.wizard-mini-bar::-webkit-progress-value{background: var(--accent); border-radius: 999px;}
.wizard-mini-bar::-moz-progress-bar{background: var(--accent); border-radius: 999px;}

/* (legacy) fill div fallback */
.wizard-mini-fill{ display:none; }
.wizard-checklist-actions{ display:flex; gap: 8px; flex-wrap:wrap; margin: 8px 0 0; }
.wizard-plan-row{ display:flex; align-items:stretch; gap: 10px; }
.wizard-done{ margin-top: 14px; transform: scale(1.1); }
.wizard-plan-item.is-done .wizard-plan-link{ opacity: .82; }
.wizard-plan-item.is-done .wizard-plan-title{ text-decoration: line-through; text-decoration-thickness: 2px; text-decoration-color: color-mix(in srgb, var(--muted) 65%, transparent); }
@media (max-width: 560px){
  .wizard-plan{ padding-left: 0; list-style: none; }
  .wizard-done{ margin-top: 10px; }
}


/* ===== Search scope (Kapitel/Tools/Tests/...) ===== */
.top-search .search-row,
.drawer-search .search-row{
  display:flex;
  gap: 8px;
  align-items:center;
}

.top-search .search-row input[type="search"],
.drawer-search .search-row input[type="search"]{
  flex: 1 1 auto;
  width: auto;
}

.top-search select,
.drawer-search select{
  flex: 0 0 auto;
  padding: 10px 10px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--bg) 70%, transparent);
  color: var(--fg);
  outline: none;
  min-width: 140px;
}

/* Prevent iOS zoom in the drawer */
.drawer-search select{
  font-size: 16px;
}

@media (max-width: 520px){
  .drawer-search .search-row{ flex-wrap: wrap; }
  .drawer-search select{ width: 100%; min-width: 0; }
}


/* === Extracted inline CSS: DocLayout Anbieter tweaks === */
/* === Anbieter pages: mobile-friendly tables & long URLs ===
       Problem: provider pages contain wide 2-column tables and long URLs.
       On narrow screens this caused horizontal overflow which is clipped
       because the site intentionally disables global horizontal scrolling.
       Fix: let content wrap + remove enforced min-width for tables on mobile.
    */
    @media (max-width: 720px){
      .is-anbieter .article-body table{
        min-width: 0 !important;
        width: 100% !important;
        table-layout: fixed;
      }
      .is-anbieter .article-body th{
        white-space: normal;
      }
      .is-anbieter .article-body :where(th, td, p, li){
        overflow-wrap: anywhere;
        word-break: break-word;
        hyphens: auto;
      }
      .is-anbieter .page-title,
      .is-anbieter .page-sub,
      .is-anbieter .page-hero .breadcrumbs,
      .is-anbieter .callout{
        overflow-wrap: anywhere;
        word-break: break-word;
      }
      .is-anbieter .article-body a{
        overflow-wrap: anywhere;
        word-break: break-word;
      }

.is-anbieter .article-body thead th{
  position: static;
  top: auto;
}

/* Mobile: reduce meta block height (TOC + "In 20 Sekunden") */
.is-anbieter details.toc{
  margin: 8px 0 12px;
}

.is-anbieter .callout.in20{
  padding: 10px 12px;
}
.is-anbieter .callout.in20 .in20-title{ margin: 0 0 6px; }
@media (max-width: 720px){
  .is-anbieter .callout.in20 .in20-desc{ display:none; }
}
.is-anbieter .callout.in20 ul.list{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin: 0;
  padding-left: 0;
}
.is-anbieter .callout.in20 ul.list li{
  margin: 0;
}
.is-anbieter .callout.in20 ul.list a{
  display:inline-flex;
  align-items:center;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--card) 85%, transparent);
  text-decoration:none;
}
.is-anbieter .callout.in20 ul.list a:hover{
  background: color-mix(in srgb, var(--card) 95%, transparent);
}
    }

    /* === Anbieter: key/value Cards (Mobile) + Summary tiles === */
    .is-anbieter .anbieter-facts{
      /* Align exactly with TOC + Article grid on desktop (same inner padding as .layout) */
      grid-column: 1 / -1;
      margin-top: 12px;
      padding: 12px 12px;
      border-radius: 18px;
      border: 1px solid var(--border);
      background: color-mix(in srgb, var(--card) 92%, transparent);
    }
    .is-anbieter .anbieter-facts .provider-badges{ margin-top: 0; }
    .is-anbieter .anbieter-links{
      display:flex;
      flex-wrap:wrap;
      gap: 8px;
      margin-top: 10px;
    }

    .is-anbieter .anbieter-go-hint{
      margin-top: 10px;
      margin-bottom: 0;
    }
    .is-anbieter .anbieter-link{
      padding: 6px 10px;
      border-radius: 999px;
      font-weight: 850;
    }
    .is-anbieter .anbieter-tiles{
      display:grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 10px;
      margin-top: 10px;
    }
    @media (max-width: 900px){
      .is-anbieter .anbieter-tiles{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }
    .is-anbieter .anbieter-tile{
      border: 1px solid color-mix(in srgb, var(--border) 85%, transparent);
      background: color-mix(in srgb, var(--bg) 72%, transparent);
      border-radius: 16px;
      padding: 10px 10px;
      min-height: 56px;
    }
    .is-anbieter .anbieter-tile .k{
      font-size: 0.82rem;
      opacity: 0.75;
      font-weight: 750;
      margin-bottom: 4px;
    }
    .is-anbieter .anbieter-tile .v{
      font-weight: 800;
      letter-spacing: -0.01em;
      overflow-wrap: anywhere;
      word-break: break-word;
    }

    .is-anbieter .kv-cards{ display:none; }
    .is-anbieter .kv-card{
      margin: 0;
      border: 1px solid var(--border);
      background: color-mix(in srgb, var(--bg) 72%, transparent);
      border-radius: 16px;
      padding: 10px 12px;
    }
    .is-anbieter .kv-card dt{
      font-size: 0.82rem;
      opacity: 0.72;
      font-weight: 780;
      margin: 0;
    }
    .is-anbieter .kv-card dd{
      margin: 4px 0 0;
      font-weight: 750;
      overflow-wrap: anywhere;
      word-break: break-word;
    }
    @media (max-width: 720px){
      .is-anbieter table.kv-source-table{ display:none; }
      .is-anbieter .kv-cards{
        display:grid;
        grid-template-columns: 1fr;
        gap: 10px;
        margin: 14px 0 18px;
      }
    }


/* === Extracted inline CSS: ScenarioLayout === */
/* Minimal, reuses existing site tokens */
    .scenario-playlist {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 14px 0 18px;
      padding: 10px;
      background: rgba(0,0,0,0.03);
      border-radius: 14px;
    }
    :global(html.dark) .scenario-playlist { background: rgba(255,255,255,0.06); }

    .playlist-link {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 10px 12px;
      border-radius: 999px;
      background: var(--card);
      border: 1px solid var(--border);
      text-decoration: none;
      font-weight: 600;
      line-height: 1;
      min-height: 40px;
    }
    .playlist-link:focus-visible {
      outline: 2px solid var(--brand);
      outline-offset: 3px;
    }

    .scenario-section + .scenario-section { margin-top: 22px; }
    .pill {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 2px 10px;
      margin-left: 8px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: var(--card);
      font-size: 12px;
      vertical-align: middle;
    }

    .scenario-details {
      margin-top: 10px;
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 6px 10px;
      background: rgba(0,0,0,0.02);
    }
    :global(html.dark) .scenario-details { background: rgba(255,255,255,0.04); }

    .scenario-details summary { cursor: pointer; padding: 8px 2px; font-weight: 700; }
    .scenario-details summary:focus-visible { outline: 2px solid var(--brand); outline-offset: 3px; border-radius: 10px; }

    .scenario-tools { padding-left: 18px; margin: 10px 0 0; }
    .scenario-tools li { margin: 8px 0; }
    .scenario-tool-link { font-weight: 600; }


/* === Extracted inline CSS: ToolLayout === */
/* Minimal, reuses existing site tokens */
    .tool-layout .tool-section + .tool-section { margin-top: 22px; }
    .tool-section-body :global(p) { margin-top: 10px; margin-bottom: 10px; }

    .tool-steps { padding-left: 22px; margin: 10px 0 0; }
    .tool-steps > li { margin: 10px 0; }
    .tool-step { max-width: 72ch; }
    .tool-step-title { font-weight: 700; margin-bottom: 4px; }
    .tool-step-text :global(p) { margin: 6px 0; }

    .tool-extras { display: grid; gap: 12px; }
    .tool-extra summary { cursor: pointer; padding: 6px 2px; }
    .tool-extra summary:focus-visible { outline: 2px solid var(--brand); outline-offset: 3px; border-radius: 10px; }


/* === Extracted inline CSS: Verzeichnis Explorer === */
/* Explorer: match PB dark theme (no extra assets, no JS required) */
    .explorer-wrap{margin-top:1.25rem}

    /* Panel background behind filters (subtle) */
    .explorer-panel{
      border:1px solid var(--border);
      border-radius:var(--radius);
      padding: 12px 14px;
      background:
        radial-gradient(900px 400px at 18% 0%, rgba(125,211,252,.09), transparent 55%),
        radial-gradient(800px 380px at 92% 10%, rgba(125,211,252,.05), transparent 60%),
        color-mix(in srgb, var(--bg) 88%, transparent);
      box-shadow: 0 14px 38px rgba(0,0,0,.28);
    }

    .explorer-filters{display:grid;gap:.85rem;grid-template-columns:1fr;align-items:end;margin:1rem 0 1.25rem}
    .explorer-filters .row{display:grid;gap: .6rem;grid-template-columns:1fr}

    .explorer-filters label{
      display:block;
      font-size:.72rem;
      font-weight:700;
      letter-spacing:.03em;
      text-transform:uppercase;
      color: color-mix(in srgb, var(--muted) 78%, transparent);
      margin-bottom: .18rem;
    }

    .explorer-filters input,
    .explorer-filters select{
      width:100%;
      padding:.55rem .75rem;
      border:1px solid var(--border);
      border-radius: 999px;
      background: color-mix(in srgb, var(--bg) 78%, var(--card));
      color: var(--fg);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.02);
      transition: box-shadow 120ms ease, border-color 120ms ease, transform 120ms ease;
    }
    .explorer-filters input::placeholder{
      color: color-mix(in srgb, var(--muted) 70%, transparent);
      opacity: 1;
    }
    .explorer-filters input:focus,
    .explorer-filters select:focus{
      box-shadow: 0 0 0 3px color-mix(in srgb, var(--brand) 35%, transparent);
      border-color: color-mix(in srgb, var(--brand) 35%, var(--border));
    }

    .explorer-actions{display:flex;gap:.6rem;flex-wrap:wrap;align-items:center}
    .explorer-actions .btn{padding:.55rem .8rem;border-radius:999px}
    .explorer-count{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,.04);
      color: var(--muted);
      font-weight: 750;
      font-size: .9rem;
    }

    .explorer-grid{list-style:none;padding:0;margin:0;display:grid;gap:.85rem;grid-template-columns:1fr}

    .exp-card{
      border:1px solid var(--border);
      border-radius: 18px;
      padding: 0;
      background:
        linear-gradient(180deg, rgba(255,255,255,.03), transparent 46%),
        color-mix(in srgb, var(--card) 92%, transparent);
      box-shadow: 0 10px 25px rgba(0,0,0,.22);
      transition: transform 120ms ease, box-shadow 120ms ease, border-color 120ms ease;
    }
    
    .exp-hit{
      display:block;
      height:100%;
      padding: 14px 14px 12px;
      color: inherit;
      text-decoration: none;
      border-radius: 18px;
    }
    .exp-hit:focus{outline:none}
    .exp-hit:focus-visible{
      outline:none;
      box-shadow: 0 0 0 4px color-mix(in srgb, var(--brand) 40%, transparent);
    }

    .exp-card:hover{
      transform: translateY(-2px);
      box-shadow: 0 16px 34px rgba(0,0,0,.34);
      border-color: color-mix(in srgb, var(--brand) 26%, var(--border));
    }

    .exp-title{display:flex;gap:.6rem;align-items:flex-start;justify-content:space-between}
    .exp-linktext{
      color: var(--fg);
      text-decoration:none;
      line-height:1.25;
      letter-spacing:-0.01em;
    }
    .exp-card:hover .exp-linktext,
    .exp-hit:focus-visible .exp-linktext{
      text-decoration: underline;
      text-underline-offset: .16em;
    }

    .exp-desc{margin:.45rem 0 0;color: color-mix(in srgb, var(--muted) 92%, transparent)}
    .exp-tags{display:flex;gap:.35rem;flex-wrap:wrap;margin:.75rem 0 0}

    .tag{
      font-size:.78rem;
      padding:.18rem .55rem;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color: color-mix(in srgb, var(--muted) 92%, transparent);
      white-space: nowrap;
    }
    .tag.tag-chapter{
      border-color: color-mix(in srgb, var(--brand) 20%, rgba(255,255,255,.10));
      background: color-mix(in srgb, var(--brand) 12%, rgba(255,255,255,.04));
      color: color-mix(in srgb, var(--fg) 92%, transparent);
    }

    .is-hidden{display:none !important}
    .basic-view{display:block}
    .enhanced-view{display:none}
    html.js .basic-view{display:none}
    html.js .enhanced-view{display:block}

    /* Mobile ergonomics: keep filters reachable */
    @media (max-width: 860px){
      .explorer-filters{
        position: sticky;
        top: calc(var(--header-h) + 10px);
        z-index: 20;
        padding: 10px;
        border-radius: 18px;
        background: color-mix(in srgb, var(--bg) 86%, transparent);
        backdrop-filter: blur(10px) saturate(140%);
        border: 1px solid var(--border);
      }
    }

    @media (min-width: 720px){
      .explorer-filters{grid-template-columns:1.2fr 1fr}
      .explorer-filters .row{grid-template-columns:repeat(3, minmax(0,1fr))}
      .explorer-grid{grid-template-columns:repeat(2, minmax(0,1fr))}
    }
    @media (min-width: 1024px){
      .explorer-grid{grid-template-columns:repeat(3, minmax(0,1fr))}
    }


/* === Extracted inline CSS: CSP replacements (inline styles removed) === */
.analytics-beacon{
  position:absolute;
  left:-9999px;
  top:-9999px;
  width:1px;
  height:1px;
  opacity:0;
}

.search-note{ margin: 6px 0 14px; }

.explorer-actions--spaced{ margin-top:.5rem; }
.explorer-privacy{ margin-top:1rem; opacity:.85; }
.basic-view--spaced{ margin-top:1.25rem; }
.basic-summary{ font-weight:700; cursor:pointer; }

.nav::-webkit-scrollbar{display:none}

.header-search{
  flex:0 0 auto;
  margin-left: 10px;
  gap:8px;
}

/*
  Header search should stay compact and inline.
  The generic .site-search styles are also reused on full pages (/suche/ etc.)
  and switch to a stacked/panel layout. Override that for the header variant.
*/
.header-search.site-search{
  display:flex;
  flex-direction:row;
  align-items:center;
  justify-content:flex-end;
  min-width:0;
  padding:0;
  margin:0 0 0 10px;
  border:0;
  background:transparent;
  box-shadow:none;
  backdrop-filter:none;
}

.header-search.site-search input{
  width: clamp(140px, 18vw, 220px);
  padding: 6px 10px;
  border-radius: 10px;
}

.header-search.site-search select{
  max-width: 140px;
  padding: 6px 8px;
  border-radius: 10px;
}

.header-search.site-search .search-results{
  position:absolute;
  top: calc(100% + 8px);
  right: 0;
  width: min(560px, 92vw);
  margin-top:0;
  max-height: 340px;
}
.header-search select{
  max-width: 150px;
  padding: 6px 8px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: var(--card);
  color: var(--fg);
  font-size: .92rem;
}
@media (max-width: 900px){
  .header-search{display:none;}
  .header-search.site-search{display:none;}
}

.footer-promise{
  padding-top: 16px;
  padding-bottom: 18px;
}
.promise-inline{
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  justify-content:center;
  gap:14px;
  text-align:center;
}
.promise-items{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:10px;
  color: var(--muted);
  font-size: 0.95rem;
  line-height: 1.5;
}
.promise-items span{
  position:relative;
  padding-left: 12px;
}
.promise-items span::before{
  content:"‚Ä¢";
  position:absolute;
  left:0;
  color: var(--brand);
}
